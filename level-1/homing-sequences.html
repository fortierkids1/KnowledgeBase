<!DOCTYPE html> <html><head>
		<title>Homing Sequences</title>
		<base href="../">
		<meta id="root-path" root-path="../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="CodeTest - Homing Sequences">
		<meta property="og:title" content="Homing Sequences">
		<meta property="og:description" content="CodeTest - Homing Sequences">
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://stormbots.github.io/KnowledgeBase/level-1/homing-sequences.html">
		<meta property="og:image" content="https://stormbots.github.io/KnowledgeBase/lib/media/limit-switch-cam.svg">
		<meta property="og:site_name" content="CodeTest">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://stormbots.github.io/KnowledgeBase/lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="lib/scripts/pixi.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="lib/scripts/minisearch.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-dark show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">aliases</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Homing</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="Homing Sequences"><p dir="auto">Homing Sequences</p></h1><div class="el-p"><p dir="auto">Homing is the process of recovering physical system positions, typically using relative encoders.</p></div><div class="el-h4 heading-wrapper"><h4 data-heading="Part of:" dir="auto" class="heading" id="Part_of:"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Part of:</h4><div class="heading-children"><div class="el-p"><p dir="auto"><a data-href="SuperStructure Arm" href="level-1/superstructure-arm.html" class="internal-link" target="_self" rel="noopener nofollow">SuperStructure Arm</a><br>
<a data-href="SuperStructure Elevator" href="level-1/superstructure-elevator.html" class="internal-link" target="_self" rel="noopener nofollow">SuperStructure Elevator</a><br>
And will generally be done after most requirements for those systems</p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Success Criteria" dir="auto" class="heading" id="Success_Criteria"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Success Criteria</h2><div class="heading-children"><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Home a subsystem using a Command-oriented method</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">Home a subsystem using a state-based method</li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">Make a non-homed system refuse non-homing command operations</li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><input data-line="3" type="checkbox" class="task-list-item-checkbox">Document the "expected startup configuration" of your robot, and how the homing sequence resolves potential issues.</li>
</ul></div><div class="el-h4 heading-wrapper"><h4 data-heading="Lesson Plan" dir="auto" class="heading" id="Lesson_Plan"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Lesson Plan</h4><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto">Configure encoders and other system configurations</li>
<li data-line="1" dir="auto">Construct a Command that homes the system</li>
<li data-line="2" dir="auto">Create a Trigger to represent if the system is homed or not</li>
<li data-line="3" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Determine the best way to integrate the homing operation. This can be 
<ul>
<li data-line="4" dir="auto">Initial one-off sequence on enable</li>
<li data-line="5" dir="auto">As a blocking operation when attempting to command the system</li>
<li data-line="6" dir="auto">As a default command with a Conditional Command</li>
<li data-line="7" dir="auto">Idle re-homing (eg, correcting for slipped belts when system is not in use)</li>
<li data-line="8" dir="auto"></li>
</ul>
</li>
</ul></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Success Criteria" dir="auto" class="heading" id="Success_Criteria"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Success Criteria</h2><div class="heading-children"><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Home an elevator system using system current</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">home an arm system using system current</li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">Home a system </li>
</ul></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What is Homing?" dir="auto" class="heading" id="What_is_Homing?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What is Homing?</h2><div class="heading-children"><div class="el-p"><p dir="auto">When a system is booted using <a data-tooltip-position="top" aria-label="Encoder Basics" data-href="Encoder Basics" href="level-1/encoder-basics.html" class="internal-link" target="_self" rel="noopener nofollow">Relative Encoders</a>, the encoder boots with a value of 0, like you'd expect. However, the real physical system can be anywhere in it's normal range of travel, and the bot has no way to know the difference.</p></div><div class="el-p"><p dir="auto">Homing is the process of reconciling this difference, this allowing your code to assert a known physical position, regardless of what position it was in when the system booted. </p></div><div class="el-h3 heading-wrapper"><h3 data-heading="To Home or not to home" dir="auto" class="heading" id="To_Home_or_not_to_home"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>To Home or not to home</h3><div class="heading-children"><div class="el-p"><p dir="auto">Homing is <em>not</em> a hard requirement of <a data-tooltip-position="top" aria-label="SuperStructure Elevator" data-href="SuperStructure Elevator" href="level-1/superstructure-elevator.html" class="internal-link" target="_self" rel="noopener nofollow">Elevator</a> or <a data-tooltip-position="top" aria-label="SuperStructure Arm" data-href="SuperStructure Arm" href="level-1/superstructure-arm.html" class="internal-link" target="_self" rel="noopener nofollow">Arm</a> systems. As long as you boot your systems in known, consistent states, you operate without issue.</p></div><div class="el-p"><p dir="auto">However, homing is generally recommended, as it provides benefits and safeguards</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">You don't need strict power-on procedures. This is helpful at practices when the bot will be power cycled and get new uploaded code regularly. </li>
<li data-line="1" dir="auto">Power loss protection: If the bot loses power during a match, you just lose time when re-homing; You don't lose full control of the bot, or worse, cause serious damage.</li>
<li data-line="2" dir="auto">Improved precision: Homing the system via code ensures that the system is always set to the same starting position. </li>
</ul></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Homing Methods" dir="auto" class="heading" id="Homing_Methods"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Homing Methods</h2><div class="heading-children"><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Hard stops</div></div><div class="callout-content">
<p dir="auto">When looking at homing, the concept of a "Hard Stop" will come up a lot. A hard stop is simply a physical constraint at the end of a system's travel, that you can reliably anticipate the robot hitting without causing system damage.<br>
In some bot designs, hard stops are free. In other designs, hard stops require some specific engineering design.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Safety first!</div></div><div class="callout-content">
<p dir="auto">Any un-homed system has potential to perform in unexpected ways, potentially causing damage to itself or it's surroundings.<br>
We'll gloss over this for now, but make sure to set safe motor current constraints by default, and only enable full power when homing is complete.</p>
</div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="No homing + strict booting process." dir="auto" class="heading" id="No_homing_+_strict_booting_process."><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>No homing + strict booting process.</h3><div class="heading-children"><div class="el-p"><p dir="auto">With this method, the consistency comes from the physical reset of the robot when first powering on the robot. Humans must physically set all non-homing mechanisms, then power the robot. </p></div><div class="el-p"><p dir="auto">From here, you can do anything  you would normally do, and the robot knows where it is. </p></div><div class="el-p"><p dir="auto">This method is often "good enough", especially for testing or initial bringup. For some robots, gravity makes it difficult to boot the robot outside of the expected condition.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="bug" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-bug"><path d="m8 2 1.88 1.88"></path><path d="M14.12 3.88 16 2"></path><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"></path><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"></path><path d="M12 20v-9"></path><path d="M6.53 9C4.6 8.8 3 7.1 3 5"></path><path d="M6 13H2"></path><path d="M3 21c0-2.1 1.7-3.9 3.8-4"></path><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"></path><path d="M22 13h-4"></path><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"></path></svg></div><div class="callout-title-inner">Watch your resets!</div></div><div class="callout-content">
<p dir="auto">With this method, make sure your code does <em>not</em> reset encoder positions when initializing.<br>
If you do, code resets or power loss will cause a de-sync between the booted position and the operational one. You have to trust the motor controller + encoder to retain positional accuracy. </p>
</div></div></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Current Detection" dir="auto" class="heading" id="Current_Detection"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Current Detection</h3><div class="heading-children"><div class="el-p"><p dir="auto">Current detection is a very common, and reliable method within FRC. With this method, you drive the system toward a hard stop, and monitor the system current.</p></div><div class="el-p"><p dir="auto">When the system hits the hard stop, the load on your system increases, requiring more power. This can be detected by polling for the motor current. When your system exceeds a specific current for a long enough time, you can assert that your system is homed! A <a data-tooltip-position="top" aria-label="Triggers" data-href="Triggers" href="level-1/triggers.html" class="internal-link" target="_self" rel="noopener nofollow">Trigger</a> is a great tool for helping monitor this condition.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Velocity Detection" dir="auto" class="heading" id="Velocity_Detection"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Velocity Detection</h3><div class="heading-children"><div class="el-p"><p dir="auto">Speed Detection works by watching the encoder's velocity. You expect that when you hit the hard stop, the velocity should be zero, and go from there. However, there's some surprises that make this more challenging than current detection. </p></div><div class="el-p"><p dir="auto">Velocity measurements can be very noisy, so using a <a data-tooltip-position="top" aria-label="https://docs.wpilib.org/en/stable/docs/software/advanced-controls/filters/index.html" rel="noopener nofollow" class="external-link" href="https://docs.wpilib.org/en/stable/docs/software/advanced-controls/filters/index.html" target="_blank">filter</a> is generally required, although debounced <a data-href="Triggers" href="level-1/triggers.html" class="internal-link" target="_self" rel="noopener nofollow">Triggers</a> can sometimes work.</p></div><div class="el-p"><p dir="auto">This method also suffers from the simple fact that the system velocity will be zero when homing starts. And zero is also the speed you're looking for as an end condition. You also cannot guarantee that the system speed ever increases above zero, as it can start against the hard stop.<br>
As such, you can't do a simple check, but need to monitor the speed for long enough to assert that the system <em>should</em> have moved if it was able to. </p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Limit Switches" dir="auto" class="heading" id="Limit_Switches"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Limit Switches</h3><div class="heading-children"><div class="el-p"><p dir="auto">Limit switches are a tried and true method in many systems. You simply place a physical switch at the end of travel; When the bot hits the end of travel, you know where it is.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Mechanical Robustness Required</div></div><div class="callout-content">
<p dir="auto">Limit switches require notable care on the design and wiring to ensure that the system reliably contacts the switch in the manner needed.</p>
</div></div></div><div class="el-p"><p dir="auto">The apparent simplicity of a limit switch hides several design and mounting considerations. In an FRC environment, some of these are surprisingly tricky.</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">A limit switch <em>must not</em> act as an end stop. Simply put, they're not robust enough to sustain impacts and will fail, leaving your system in an uncontrolled, downward driving stage. </li>
<li data-line="1" dir="auto">A limit switch <em>must</em> be triggered at the end of travel; Otherwise, it's possible to start <em>below</em> the switch. </li>
<li data-line="2" dir="auto">A switch must have a consistent "throw" ; It should trip at the same location every time. Certain triggering mechanisms and arms can cause problems.</li>
<li data-line="3" dir="auto">If the hard stop moves or is adjusted, the switch will be exposed for damage, and/or result in other issues</li>
</ul></div><div class="el-p"><p dir="auto">Because of these challenges, limit switches in FRC tend to be used in niche applications, where use of hard stops is restricted. One such case is screw-driven <a data-href="Linear Actuators" href="Linear Actuators" class="internal-link" target="_self" rel="noopener nofollow">Linear Actuators</a>, which generate enormous amounts of force at very low currents, but are very slow and easy to mount things to.</p></div><div class="el-p"><p dir="auto">Switches also come in multiple types, which can impact the ease of design. In many cases, a magnetic hall effect sensor is optimal, as it's non-contact, and easy to mount alongside a hard stop to prevent overshoot.</p></div><div class="el-p"><p dir="auto">Most 3D printers use limit switches, allowing for very good demonstrations of the routines needed to make these work with high precision.</p></div><div class="el-p"><p dir="auto">For designs where hard stops are not possible, consider a Roller Arm Limit Switch and run it against a CAM. This configuration allows the switch to be mounted out of the line of motion, but with an extended throw. </p></div><div class="el-p"><p dir="auto"><span alt="limit-switch-cam.svg" src="limit-switch-cam.svg" class="internal-embed media-embed image-embed is-loaded"><img alt="limit-switch-cam.svg" src="lib/media/limit-switch-cam.svg"></span></p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Index Switches" dir="auto" class="heading" id="Index_Switches"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Index Switches</h3><div class="heading-children"><div class="el-p"><p dir="auto">Index switches work similarly to Limit Switches, but the expectation is that they're in the middle of the travel, rather than at the end of travel. This makes them unsuitable as a solo homing method, but useful as an auxiliary one. </p></div><div class="el-p"><p dir="auto">Index switches are best used in situations where other homing routines would simply take too long, but you have sufficient knowledge to know that it <em>should</em> hit the switch in most cases.<br>
This can often come up in <a data-tooltip-position="top" aria-label="SuperStructure Elevator" data-href="SuperStructure Elevator" href="level-1/superstructure-elevator.html" class="internal-link" target="_self" rel="noopener nofollow">Elevator</a> systems where the robot starting configuration puts the carriage far away from the nearest limit. </p></div><div class="el-p"><p dir="auto">In this configuration, use of a non-contact switch is generally preferred, although a roller-arm switch and a cam can work well.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Absolute Position Sensors" dir="auto" class="heading" id="Absolute_Position_Sensors"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Absolute Position Sensors</h3><div class="heading-children"><div class="el-p"><p dir="auto">In some cases we can use absolute sensors such as <a data-href="Absolute Encoders" href="hardware/absolute-encoders.html" class="internal-link" target="_self" rel="noopener nofollow">Absolute Encoders</a>, <a data-tooltip-position="top" aria-label="Gyro Sensing" data-href="Gyro Sensing" href="level-1/gyro-sensing.html" class="internal-link" target="_self" rel="noopener nofollow">Gyros</a>, or <a data-tooltip-position="top" aria-label="LaserCan" data-href="LaserCan" href="hardware/lasercan.html" class="internal-link" target="_self" rel="noopener nofollow">Range Finders</a> to directly detect information about the robot state, and feed that information into our other sensors. </p></div><div class="el-p"><p dir="auto">This method works very effectively on <a data-tooltip-position="top" aria-label="SuperStructure Arm" data-href="SuperStructure Arm" href="level-1/superstructure-arm.html" class="internal-link" target="_self" rel="noopener nofollow">Arm</a> based systems; <a data-href="Absolute Encoders" href="hardware/absolute-encoders.html" class="internal-link" target="_self" rel="noopener nofollow">Absolute Encoders</a> on an output shaft provide a 1:1 system state for almost all mechanical designs. </p></div><div class="el-p"><p dir="auto">Elevator systems can also use these routines using <a data-tooltip-position="top" aria-label="LaserCan" data-href="LaserCan" href="hardware/lasercan.html" class="internal-link" target="_self" rel="noopener nofollow">|Range Finders</a> , detecting the distance between the carriage and end of travel. </p></div><div class="el-p"><p dir="auto">Clever designers can also use <a data-href="Absolute Encoders" href="hardware/absolute-encoders.html" class="internal-link" target="_self" rel="noopener nofollow">Absolute Encoders</a> for elevators in a few ways </p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">You can simply assert a position within a narrow range of travel</li>
<li data-line="1" dir="auto">You can gear the encoder to have a lower resolution across the full range of travel. Many encoders have enough precision that this is perfectly fine.</li>
<li data-line="2" dir="auto">You can use multiple absolute encoders to combine the above global + local states</li>
</ul></div><div class="el-p"><p dir="auto">For a typical system using Spark motors and Through Bore Encoders, it looks like this:</p></div><div class="el-pre"><pre class="language-java"><code data-line="0" class="language-java is-loaded"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleSubsystem</span><span class="token punctuation">{</span>
	<span class="token class-name">SparkMax</span> motor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sparkmax</span><span class="token punctuation">(</span><span class="token comment">/*......*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ExampleSubsystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">SparkBaseConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SparkMaxConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//Configure the motor's encoders to use the same real-world unit</span>
		armMotor<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span><span class="token doc-comment comment">/***/);
		
		//We can now compare the values directly, and initialize the 
		//Relative encoder state from the absolute sensor.
		var angle = motor.getAbsoluteEncoder.getPosition();
		motor.getEncoder.setPosition(angle);
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Time based homing" dir="auto" class="heading" id="Time_based_homing"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Time based homing</h3><div class="heading-children"><div class="el-p"><p dir="auto">A relatively simple routine, but just running your system with a known minimum power for a set length of time can ensure the system gets into a known position. After the time, you can reset the encoder. </p></div><div class="el-p"><p dir="auto">This method is very situational. It should only be used in situations where you have a solid understanding of the system mechanics, and know that the system will not encounter damage when ran for a set length of time. This is usually paired with a lower current constraint during the homing operation.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Backlash-compensated homing" dir="auto" class="heading" id="Backlash-compensated_homing"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Backlash-compensated homing</h3><div class="heading-children"><div class="el-p"><p dir="auto">In some cases you might be able to find the system home state (using gravity or another method), but find <a data-tooltip-position="top" aria-label="Mechanical Backlash" data-href="Mechanical Backlash" href="misc/mechanical-backlash.html" class="internal-link" target="_self" rel="noopener nofollow">backlash</a> is preventing you from hitting desired consistency and reliability.</p></div><div class="el-p"><p dir="auto">This is most likely to be needed on <a data-tooltip-position="top" aria-label="SuperStructure Arm" data-href="SuperStructure Arm" href="level-1/superstructure-arm.html" class="internal-link" target="_self" rel="noopener nofollow">Arm</a> systems, particularly actuated <a data-tooltip-position="top" aria-label="Superstructure Shooter" data-href="Superstructure Shooter" href="level-2/superstructure-shooter.html" class="internal-link" target="_self" rel="noopener nofollow">Shooter</a> systems. This is akin to a "calibration" as much as it is homing.</p></div><div class="el-p"><p dir="auto">In these cases, homing routines will tend to find the absolute position by driving downward toward a hard stop. In doing so, this applies drive train tension toward the down direction. However, during normal operation, the drive train tension will be upward, against gravity. </p></div><div class="el-p"><p dir="auto">This gives a small, but potentially significant difference between the "zero" detected by the sensor, and the "zero" you actually want. Notably, this value is not a consistent value, and wear over the life of the robot can impact it.</p></div><div class="el-p"><p dir="auto">Similarly, in "no-homing" scenarios where you have gravity assertion, the backlash tension is effectively randomized. </p></div><div class="el-p"><p dir="auto">To resolve this, backlash compensation then needs to run to apply tension "upward" before fully asserting a fully defined system state. This is a scenario where a time-based operation is suitable, as it's a fast operation, from a known state. The power applied should also be small, ideally a large value that won't cause actual motion away from your hard stop (meaning, at/below <a data-tooltip-position="top" aria-label="FeedForwards" data-href="FeedForwards" href="level-1/feedforwards.html" class="internal-link" target="_self" rel="noopener nofollow">kS+kG</a> ).</p></div><div class="el-p"><p dir="auto">For an implementation of this, see <a data-tooltip-position="top" aria-label="https://github.com/stormbots/Crescendo/blob/main/src/main/java/frc/robot/commands/CalibrateShooter.java" rel="noopener nofollow" class="external-link" href="https://github.com/stormbots/Crescendo/blob/main/src/main/java/frc/robot/commands/CalibrateShooter.java" target="_blank">CalibrateShooter</a> from Crescendo.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Online position recovery" dir="auto" class="heading" id="Online_position_recovery"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Online position recovery</h3><div class="heading-children"><div class="el-p"><p dir="auto">Nominally, homing a robot is done once at first run, and from there you know the position. However, sometimes the robot has known mechanical faults that cause routine loss of positioning from the encoder's perspective. However, other sensors may be able to provide insight, and help correct the error.<br>
This kind of error most typically shows up in belt or chain skipping. </p></div><div class="el-p"><p dir="auto">To overcome these issues, what you can do is run some condition checking alongside your normal runtime code, trying to identify signs that the system is in a potentially incorrect state, and correcting sensor information.</p></div><div class="el-p"><p dir="auto">This is best demonstrated with examples: </p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">If you home a elevator to the bottom of a drive at position 0, you should never see encoder values be negative. As such, seeing a "negative" encoder value tells you that the mechanism has hit end of travel.</li>
<li data-line="1" dir="auto">If you have a switch at the limit of travel, you can just re-assert zero every time you hit it. If there's a belt slip, you still end up at zero.</li>
<li data-line="2" dir="auto">If an arm should rest in an "up" position, but the slip trends to push it down, retraction failures might have no good detection modes. So, simply apply a re-homing technique whenever the arm is in idle state.</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="bug" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-bug"><path d="m8 2 1.88 1.88"></path><path d="M14.12 3.88 16 2"></path><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"></path><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"></path><path d="M12 20v-9"></path><path d="M6.53 9C4.6 8.8 3 7.1 3 5"></path><path d="M6 13H2"></path><path d="M3 21c0-2.1 1.7-3.9 3.8-4"></path><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"></path><path d="M22 13h-4"></path><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"></path></svg></div><div class="callout-title-inner">Band-Aid Fix</div></div><div class="callout-content">
<p dir="auto">Online Position Recovery is a useful technique in a pinch. But, as with all other hardware faults, it's best to fix it in hardware. Use only when needed.</p>
</div></div></div><div class="el-p"><p dir="auto">If the system is running nominally, these techniques don't provide much value, and can cause other runtime surprises and complexity, so it's discouraged.<br>
In cases where such loss of control is hypothetical or infrequent, simply giving drivers a homing/button tends to be a better approach. </p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Modelling Un-homed systems in code" dir="auto" class="heading" id="Modelling_Un-homed_systems_in_code"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Modelling Un-homed systems in code</h2><div class="heading-children"><div class="el-p"><p dir="auto">When doing homing, you typically have 4 system states, each with their own behavior. Referring it to it as a <a data-tooltip-position="top" aria-label="State Machines" data-href="State Machines" href="level-1/state-machines.html" class="internal-link" target="_self" rel="noopener nofollow">State Machine</a> is generally simpler </p></div><div class="el-pre"><div class="mermaid"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0.0000019073486328125 729.2162475585938 70.00565338134766" height="70.00565338134766" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="729.2162475585938" id="m67c7c751559d840c"><style>#m67c7c751559d840c{font-family:var(--font-mermaid);font-size:16px;fill:#333;}#m67c7c751559d840c .error-icon{fill:#552222;}#m67c7c751559d840c .error-text{fill:#552222;stroke:#552222;}#m67c7c751559d840c .edge-thickness-normal{stroke-width:1px;}#m67c7c751559d840c .edge-thickness-thick{stroke-width:3.5px;}#m67c7c751559d840c .edge-pattern-solid{stroke-dasharray:0;}#m67c7c751559d840c .edge-thickness-invisible{stroke-width:0;fill:none;}#m67c7c751559d840c .edge-pattern-dashed{stroke-dasharray:3;}#m67c7c751559d840c .edge-pattern-dotted{stroke-dasharray:2;}#m67c7c751559d840c .marker{fill:#333333;stroke:#333333;}#m67c7c751559d840c .marker.cross{stroke:#333333;}#m67c7c751559d840c svg{font-family:var(--font-mermaid);font-size:16px;}#m67c7c751559d840c p{margin:0;}#m67c7c751559d840c .label{font-family:var(--font-mermaid);color:#333;}#m67c7c751559d840c .cluster-label text{fill:#333;}#m67c7c751559d840c .cluster-label span{color:#333;}#m67c7c751559d840c .cluster-label span p{background-color:transparent;}#m67c7c751559d840c .label text,#m67c7c751559d840c span{fill:#333;color:#333;}#m67c7c751559d840c .node rect,#m67c7c751559d840c .node circle,#m67c7c751559d840c .node ellipse,#m67c7c751559d840c .node polygon,#m67c7c751559d840c .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#m67c7c751559d840c .rough-node .label text,#m67c7c751559d840c .node .label text,#m67c7c751559d840c .image-shape .label,#m67c7c751559d840c .icon-shape .label{text-anchor:middle;}#m67c7c751559d840c .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#m67c7c751559d840c .rough-node .label,#m67c7c751559d840c .node .label,#m67c7c751559d840c .image-shape .label,#m67c7c751559d840c .icon-shape .label{text-align:center;}#m67c7c751559d840c .node.clickable{cursor:pointer;}#m67c7c751559d840c .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#m67c7c751559d840c .arrowheadPath{fill:#333333;}#m67c7c751559d840c .edgePath .path{stroke:#333333;stroke-width:2.0px;}#m67c7c751559d840c .flowchart-link{stroke:#333333;fill:none;}#m67c7c751559d840c .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#m67c7c751559d840c .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#m67c7c751559d840c .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#m67c7c751559d840c .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#m67c7c751559d840c .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#m67c7c751559d840c .cluster text{fill:#333;}#m67c7c751559d840c .cluster span{color:#333;}#m67c7c751559d840c div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#m67c7c751559d840c .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#m67c7c751559d840c rect.text{fill:none;stroke-width:0;}#m67c7c751559d840c .icon-shape,#m67c7c751559d840c .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#m67c7c751559d840c .icon-shape p,#m67c7c751559d840c .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#m67c7c751559d840c .icon-shape rect,#m67c7c751559d840c .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#m67c7c751559d840c :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Unhomed_Homing_0" d="M142.961,35.003L147.128,35.003C151.294,35.003,159.628,35.003,167.294,35.003C174.961,35.003,181.961,35.003,185.461,35.003L188.961,35.003"></path><path marker-end="url(#m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Homing_Homed_1" d="M313.296,35.003L317.463,35.003C321.629,35.003,329.963,35.003,337.629,35.003C345.296,35.003,352.296,35.003,355.796,35.003L359.296,35.003"></path><path marker-end="url(#m67c7c751559d840c-m67c7c751559d840c_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Homed_NormalOperation_2" d="M478.642,35.003L482.808,35.003C486.975,35.003,495.308,35.003,502.975,35.003C510.642,35.003,517.642,35.003,521.142,35.003L524.642,35.003"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(75.48048400878906, 35.002824783325195)" id="flowchart-Unhomed-0" class="node default"><rect height="54.005653381347656" width="134.96096801757812" y="-27.002826690673828" x="-67.48048400878906" style="" class="basic label-container"></rect><g transform="translate(-37.48048400878906, -12.002826690673828)" style="" class="label"><rect></rect><foreignObject height="24.005653381347656" width="74.96096801757812"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Unhomed</p></span></div></foreignObject></g></g><g transform="translate(253.12849807739258, 35.002824783325195)" id="flowchart-Homing-1" class="node default"><rect height="54.005653381347656" width="120.33506393432617" y="-27.002826690673828" x="-60.167531967163086" style="" class="basic label-container"></rect><g transform="translate(-30.167531967163086, -12.002826690673828)" style="" class="label"><rect></rect><foreignObject height="24.005653381347656" width="60.33506393432617"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Homing</p></span></div></foreignObject></g></g><g transform="translate(420.9688529968262, 35.002824783325195)" id="flowchart-Homed-2" class="node default"><rect height="54.005653381347656" width="115.34565353393555" y="-27.002826690673828" x="-57.67282676696777" style="" class="basic label-container"></rect><g transform="translate(-27.672826766967773, -12.002826690673828)" style="" class="label"><rect></rect><foreignObject height="24.005653381347656" width="55.34565353393555"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Homed</p></span></div></foreignObject></g></g><g transform="translate(624.9289474487305, 35.002824783325195)" id="flowchart-NormalOperation-3" class="node default"><rect height="54.005653381347656" width="192.5745391845703" y="-27.002826690673828" x="-96.28726959228516" style="" class="basic label-container"></rect><g transform="translate(-66.28726959228516, -12.002826690673828)" style="" class="label"><rect></rect><foreignObject height="24.005653381347656" width="132.5745391845703"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>NormalOperation</p></span></div></foreignObject></g></g></g></g></g></svg></div></div><div class="el-h4 heading-wrapper"><h4 data-heading="Unhomed" dir="auto" class="heading" id="Unhomed"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Unhomed</h4><div class="heading-children"><div class="el-p"><p dir="auto">The UnHomed state should be the default bootup state. This state should prepare your system to </p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">A boolean flag or state variable your system can utilize</li>
<li data-line="1" dir="auto">Safe operational current limits; Typically this means a low output current or speed control.</li>
</ul></div><div class="el-p"><p dir="auto">It's often a good plan to have some way to manually trigger a system to go into the Unhomed state and begin homing again. This allows your robot drivers to recover from unexpected conditions when they come up. There's a number of ways your robot can lose position during operation, most of which have nothing to do with software.</p></div></div></div><div class="el-h4 heading-wrapper"><h4 data-heading="Homing" dir="auto" class="heading" id="Homing"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Homing</h4><div class="heading-children"><div class="el-p"><p dir="auto">The Homing state should simply run the desired homing strategy. </p></div><div class="el-p"><p dir="auto">Modeling this sequence tends to be the tricky part, and a careless approach will typically reveal a few issues</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">Modelling the system with driving logic in the subsystem and Periodic routine typically clashes with the general flow of the Command structure. </li>
<li data-line="1" dir="auto">Modelling the Homing as a command can result in drivers cancelling the command, leaving the system in an unknown state</li>
<li data-line="2" dir="auto">And, trying to continuously re-apply homing and cancellation processes can make the drivers frustrated as the system never gets to the known state.</li>
<li data-line="3" dir="auto">Trying to make many other commands check homing conditions can result in bugs by omission.</li>
</ul></div><div class="el-p"><p dir="auto">The obvious takeaway is that however you home, you want it to be <em>fast</em> and preferably completed before the drivers try to command the system. Working with your designers can streamline this process.</p></div><div class="el-p"><p dir="auto">Use of the <a data-tooltip-position="top" aria-label="Commands" data-href="Commands" href="level-1/commands.html" class="internal-link" target="_self" rel="noopener nofollow">Command</a> decorator <code>withInterruptBehavior(...)</code> allows an easy escape hatch. This flag allows an inversion of how Command are scheduled; Instead of new commands cancelling running ones, this allows your homing command to forcibly block others from getting scheduled.</p></div><div class="el-p"><p dir="auto">If your system is already operating on an internal state machine, homing can simply be a state within that state machine.</p></div></div></div><div class="el-h4 heading-wrapper"><h4 data-heading="Homed" dir="auto" class="heading" id="Homed"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Homed</h4><div class="heading-children"><div class="el-p"><p dir="auto">This state is easy: Your system can now assert the known position, set your Homed state, apply updated power/speed constraints, resume normal operation.</p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Example Implementations" dir="auto" class="heading" id="Example_Implementations"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Example Implementations</h2><div class="heading-children"><div class="el-h3 heading-wrapper"><h3 data-heading="Command Based" dir="auto" class="heading" id="Command_Based"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Command Based</h3><div class="heading-children"><div class="el-p"><p dir="auto">Conveniently, the whole homing process actually fits very neatly into the <a data-href="Commands" href="level-1/commands.html" class="internal-link" target="_self" rel="noopener nofollow">Commands</a> model, making for a very simple implementation</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto"><code>init()</code> represents the unhomed state and reset</li>
<li data-line="1" dir="auto"><code>execute()</code> represents the homing state</li>
<li data-line="2" dir="auto"><code>isFinished()</code> checks the system state and indicates completion</li>
<li data-line="3" dir="auto"><code>end(cancelled)</code> can handle the homed procedure</li>
</ul></div><div class="el-pre"><pre class="language-java"><code data-line="0" class="language-java is-loaded"><span class="token keyword">class</span> <span class="token class-name">ExampleSubsystem</span> <span class="token keyword">extends</span> <span class="token class-name">SubsystemBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">SparkMax</span> motor <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">boolean</span> homed<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token class-name">ExampleSubsystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		motor<span class="token punctuation">.</span><span class="token function">setMaxOutputCurrent</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will vary by system</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Command</span> <span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FunctionalCommand</span><span class="token punctuation">(</span>
			<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
				homed<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
				motor<span class="token punctuation">.</span><span class="token function">setMaxOutputCurrent</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>motor<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> motor<span class="token punctuation">.</span><span class="token function">getAppliedCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//isFinished</span>
			<span class="token punctuation">(</span>cancelled<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>cancelled<span class="token operator">==</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					homed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					motor<span class="token punctuation">.</span><span class="token function">setMaxOutputCurrent</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">)</span>
		<span class="token comment">//Optionally: prevent other commands from stopping this one</span>
		<span class="token comment">//This is a *very* powerful option, and one that</span>
		<span class="token comment">//Should only be used when you know it's what you want.</span>
		<span class="token punctuation">.</span><span class="token function">withInterruptBehavior</span><span class="token punctuation">(</span>kCancelIncoming<span class="token punctuation">)</span>
		<span class="token comment">// Failsafe in case something goes wrong,since otherwise you </span>
		<span class="token comment">// can't exit this command by button mashing</span>
		<span class="token punctuation">.</span><span class="token function">withTimeout</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">This command can then be inserted at the start of autonomous, ensuring that your bot is always homed during a match. It also can be easily mapped to a button, allowing for mid-match recovery. If needed, it can also be broken up into a slightly more complicated command sequence.</p></div><div class="el-p"><p dir="auto">For situations where you won't be running an auto (typical testing and practice field scenarios), the use of <a data-href="Triggers" href="level-1/triggers.html" class="internal-link" target="_self" rel="noopener nofollow">Triggers</a> can facilitate automatic checking and scheduling</p></div><div class="el-pre"><pre class="language-java"><code data-line="0" class="language-java is-loaded"><span class="token keyword">class</span> <span class="token class-name">ExampleSubsystem</span> <span class="token keyword">extends</span> <span class="token class-name">SubsystemBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">ExampleSubsystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">Trigger</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token class-name">Driverstation</span><span class="token operator">::</span><span class="token function">isEnabled</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>isHomed<span class="token operator">==</span><span class="token boolean">false</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">whileTrue</span><span class="token punctuation">(</span><span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Alternatively, if you don't want to use the <code>withInterruptBehavior(...)</code> option, you can hijack other command calls with <code>Commands.either(...)</code> or <code>new ConditionalCommand(...)</code></p></div><div class="el-pre"><pre class="language-java"><code data-line="0" class="language-java is-loaded"><span class="token keyword">class</span> <span class="token class-name">ExampleSubsystem</span> <span class="token keyword">extends</span> <span class="token class-name">SubsystemBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">/* ... */</span>
	<span class="token comment">//Intercept commands directly to prevent unhomed operation</span>
	<span class="token keyword">public</span> <span class="token class-name">Command</span> <span class="token function">goUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">either</span><span class="token punctuation">(</span>
		<span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>isHomed
	<span class="token punctuation">}</span>
<span class="token comment">/* ... */</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">While generally not preferable, a DefaultCommand and the <code>either</code>/<code>ConditionalCommand</code> notation can be used to  initiate homing. This is typically not recommended due to defaultCommands having an implicit low priority, while homing is a very high priority task.</p></div><div class="mod-footer mod-ui"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="level-1/homing-sequences.html#Homing Sequences"><div class="tree-item-contents heading-link" heading-name="Homing Sequences"><span class="tree-item-title">Homing Sequences</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="4"><a class="tree-link" href="level-1/homing-sequences.html#Part_of:"><div class="tree-item-contents heading-link" heading-name="Part of:"><span class="tree-item-title">Part of:</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="level-1/homing-sequences.html#Success_Criteria"><div class="tree-item-contents heading-link" heading-name="Success Criteria"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Success Criteria</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="4"><a class="tree-link" href="level-1/homing-sequences.html#Lesson_Plan"><div class="tree-item-contents heading-link" heading-name="Lesson Plan"><span class="tree-item-title">Lesson Plan</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="level-1/homing-sequences.html#Success_Criteria"><div class="tree-item-contents heading-link" heading-name="Success Criteria"><span class="tree-item-title">Success Criteria</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="level-1/homing-sequences.html#What_is_Homing?"><div class="tree-item-contents heading-link" heading-name="What is Homing?"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">What is Homing?</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#To_Home_or_not_to_home"><div class="tree-item-contents heading-link" heading-name="To Home or not to home"><span class="tree-item-title">To Home or not to home</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="level-1/homing-sequences.html#Homing_Methods"><div class="tree-item-contents heading-link" heading-name="Homing Methods"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Homing Methods</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#No_homing_+_strict_booting_process."><div class="tree-item-contents heading-link" heading-name="No homing + strict booting process."><span class="tree-item-title">No homing + strict booting process.</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Current_Detection"><div class="tree-item-contents heading-link" heading-name="Current Detection"><span class="tree-item-title">Current Detection</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Velocity_Detection"><div class="tree-item-contents heading-link" heading-name="Velocity Detection"><span class="tree-item-title">Velocity Detection</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Limit_Switches"><div class="tree-item-contents heading-link" heading-name="Limit Switches"><span class="tree-item-title">Limit Switches</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Index_Switches"><div class="tree-item-contents heading-link" heading-name="Index Switches"><span class="tree-item-title">Index Switches</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Absolute_Position_Sensors"><div class="tree-item-contents heading-link" heading-name="Absolute Position Sensors"><span class="tree-item-title">Absolute Position Sensors</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Time_based_homing"><div class="tree-item-contents heading-link" heading-name="Time based homing"><span class="tree-item-title">Time based homing</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Backlash-compensated_homing"><div class="tree-item-contents heading-link" heading-name="Backlash-compensated homing"><span class="tree-item-title">Backlash-compensated homing</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Online_position_recovery"><div class="tree-item-contents heading-link" heading-name="Online position recovery"><span class="tree-item-title">Online position recovery</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="level-1/homing-sequences.html#Modelling_Un-homed_systems_in_code"><div class="tree-item-contents heading-link" heading-name="Modelling Un-homed systems in code"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Modelling Un-homed systems in code</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="4"><a class="tree-link" href="level-1/homing-sequences.html#Unhomed"><div class="tree-item-contents heading-link" heading-name="Unhomed"><span class="tree-item-title">Unhomed</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="level-1/homing-sequences.html#Homing"><div class="tree-item-contents heading-link" heading-name="Homing"><span class="tree-item-title">Homing</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="level-1/homing-sequences.html#Homed"><div class="tree-item-contents heading-link" heading-name="Homed"><span class="tree-item-title">Homed</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="level-1/homing-sequences.html#Example_Implementations"><div class="tree-item-contents heading-link" heading-name="Example Implementations"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Example Implementations</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="level-1/homing-sequences.html#Command_Based"><div class="tree-item-contents heading-link" heading-name="Command Based"><span class="tree-item-title">Command Based</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>